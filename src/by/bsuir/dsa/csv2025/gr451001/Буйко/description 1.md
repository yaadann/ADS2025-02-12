# Название

Стратегия последовательных инвестиций

# Описание

Стратегия последовательных инвестиций

## Условие задачи

Вы являетесь финансовым аналитиком в инвестиционной компании. На рынке появился новый тип активов — "крайние акции". Особенность этих активов в том, что ежедневно для покупки доступны только акции, находящиеся на "краях" текущего списка.

### Механизм торгов
- Каждый день доступны к покупке только две акции: первая и последняя в текущем списке
- После покупки выбранная акция удаляется из списка
- На следующий день становятся доступны новые "крайние" акции
- Торги идут по очереди, ваша компания ходит первой

**Цель:** Определить, может ли ваша компания гарантированно получить совокупную стоимость акций, не меньшую чем у конкурента, при условии что обе компании действуют оптимально.

## Формальная постановка

Дан массив целых чисел `prices` длиной `n`, где `prices[i]` представляет стоимость i-й акции в миллионах рублей.

Необходимо определить, может ли первый игрок (ваша компания) гарантировать, что его итоговая сумма будет **не меньше** суммы второго игрока (конкурента), при условии что оба игрока действуют оптимально.

## Примеры

### Пример 1
```
n = 3
prices = [1, 5, 2]
result = False
```
*Объяснение:* Независимо от выбора первого игрока, второй сможет выбрать акцию стоимостью 5 миллионов.

### Пример 2
```
n = 4
prices = [1, 5, 233, 7]
result = True
```
*Объяснение:* Первый игрок может выбрать 1, затем независимо от выбора второго игрока, первый заберет акцию за 233 миллиона.

## Ограничения
- 1 ≤ `prices.length` ≤ 20
- 0 ≤ `prices[i]` ≤ 10^7

# Краткая теория

Теория к задаче "Стратегия последовательных инвестиций"

##  Математическая основа

### Теория игр
Данная задача относится к **антагонистическим играм с полной информацией**:

- **Два игрока** с противоположными интересами
- **Полная информация** - все ходы и стоимости известны обоим игрокам
- **Последовательные ходы** - игроки ходят по очереди
- **Нулевая сумма** - выигрыш одного равен проигрышу другого

### Ключевые концепции

#### 1. Минимаксная стратегия
Каждый игрок выбирает ход, который **максимизирует его минимальный гарантированный выигрыш** при условии оптимальной игры оппонента.

#### 2. Значение игры
Результат, который гарантированно может получить первый игрок при оптимальной игре обеих сторон.

##  Формальная модель

### Определения
Пусть `F(i, j)` - максимальное преимущество, которое может получить текущий игрок на подмассиве `prices[i...j]`.

### Рекуррентные соотношения

#### Базовый случай
```
F(i, i) = prices[i]  # Осталась одна акция
```

#### Общий случай
```
F(i, j) = max(
    prices[i] - F(i + 1, j),   # Взяли левую акцию
    prices[j] - F(i, j - 1)    # Взяли правую акцию
)
```

### Объяснение формулы
- `prices[i] - F(i + 1, j)` - взяли левую акцию, оппонент будет играть оптимально на оставшемся отрезке
- `prices[j] - F(i, j - 1)` - взяли правую акцию, оппонент будет играть оптимально на оставшемся отрезке

##  Анализ сложности

### Временная сложность
- **Рекурсия**: O(2ⁿ) без мемоизации, O(n²) с мемоизацией
- **Динамическое программирование**: O(n²)

### Пространственная сложность
- **Рекурсия с мемоизацией**: O(n²)
- **Динамическое программирование**: O(n²), можно оптимизировать до O(n)

##  Свойства оптимальной стратегии

### Симметрия игры
Задача симметрична - если первый игрок может выиграть с преимуществом X, то второй игрок, начав первым, также сможет выиграть с преимуществом X.

### Критические случаи
1. **Четная длина массива** - у первого игрока есть стратегическое преимущество
2. **Большой разброс значений** - наличие "джекпот" акций сильно влияет на результат
3. **Палиндромные массивы** - результат зависит от конкретных значений

##  Практические инсайты

### Когда первый игрок гарантированно выигрывает?
- Когда может контролировать доступ к "дорогим" акциям
- Когда сумма стоимостей на четных позициях значительно отличается от суммы на нечетных
- Когда может создать ситуацию "вилки" для оппонента

### Тактические принципы
1. **Контроль доступа** - ограничивайте оппоненту доступ к ценным акциям
2. **Балансировка** - иногда лучше взять меньшую акцию, но сохранить позиционное преимущество
3. **Дальновидность** - планируйте ходы на несколько шагов вперед

##  Критерий победы

Первый игрок может гарантировать победу если:
```
F(0, n-1) ≥ 0
```

Это означает, что при оптимальной игре разница сумм (игрок1 - игрок2) будет неотрицательной.

