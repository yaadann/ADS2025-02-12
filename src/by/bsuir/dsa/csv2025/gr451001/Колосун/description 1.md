# Название

Распределение экспертных ресурсов

# Описание

Распределение экспертных ресурсов 

Вы руководите консалтинговой компанией **"Company"**. У вас в распоряжении $N$ **Специалистов** и $M$ **Клиентских Проектов**.

Каждый **Специалист** обладает определенным **Уровнем Экспертизы** ($A_i$). Каждый **Проект** требует минимального **Уровня Допуска** ($B_j$) и имеет параметр **Отдачи** ($C_j$).

Для выполнения проекта требуется, чтобы Уровень Экспертизы выбранного Специалиста ($A_i$) был **не ниже** Уровня Допуска проекта ($B_j$).

Все проекты делятся на два типа в зависимости от **Отдачи** ($C_j$):

## 1. Проекты Развития ($C_j > 0$)

Это сложные проекты, связанные с обучением и сертификацией.

* **Использование ресурса:** Специалист временно привлекается к проекту.
* **Результат:** После завершения проекта специалист **возвращается** в пул, но его **Уровень Экспертизы** навсегда повышается до $A_{\text{new}} = \max(A_{\text{текущий}}, C_j)$.

## 2. Проекты Утилизации ($C_j = 0$)

Это одноразовые задачи, связанные с расходованием уникальных навыков.

* **Использование ресурса:** Специалист безвозвратно привлекается к проекту.
* **Результат:** После завершения проекта специалист **покидает** компанию.

---

## Цель

Определите, какое **максимальное количество Проектов** может выполнить компания, оптимально распределив своих специалистов.

# Краткая теория

Мы будем называть привлечение **Специалиста** к **Проекту** операцией $i$, а Специалиста с меньшим Уровнем Экспертизы — "меньшим специалистом".

## Лемма 1: Порядок этапов

Оптимально выполнять **Проекты Утилизации** ($C_j = 0$) только **после** завершения всех **Проектов Развития** ($C_k > 0$).

**Доказательство:**
Предположим, мы выполняем Проект $j$ ($C_j=0$) до Проекта $k$ ($C_k > 0$). Поскольку после Проекта $j$ мы не получаем новых специалистов, Специалист, использованный для Проекта $k$, должен существовать до Проекта $j$. Следовательно, мы всегда можем отложить операцию $j$ до операции $k$.

Мы называем процесс выполнения проектов $C_j > 0$ **Этапом 1**, а проектов $C_j = 0$ — **Этапом 2**.

## Лемма 2: Порядок в Этапе 1 (Развитие)

На Этапе 1 оптимально выполнять Проекты в **порядке возрастания** минимального **Уровня Допуска** ($B_j$).

**Доказательство:**
Сортировка по $B_j$ гарантирует, что если у нас есть ресурс, способный выполнить текущий проект, он сможет выполнить и все предыдущие проекты. Это обеспечивает максимально раннее использование потенциала обновления ($C_j$).

## Лемма 3: Выбор специалиста в Этапе 1

На Этапе 1 оптимально использовать **наименьшего возможного специалиста**, чей уровень экспертизы $A_i \geq B_j$.

**Доказательство (Обоснование):**
Использование наименьшего $A_i$ гарантирует, что более сильные специалисты остаются в пуле для потенциально более сложных будущих проектов. Поскольку после выполнения проекта $i$ уровень экспертизы обновляется до $A_{\text{new}} = \max(A_{\text{old}}, C_j)$, использование меньшего $A_{\text{old}}$ (если $C_j$ высокий) с большей вероятностью приведет к увеличению итогового пула ресурсов (мультимножество ресурсов после операции с меньшим специалистом **доминирует** мультимножество, полученное с большим специалистом).

## Лемма 4 и 5: Этап 2 (Утилизация)

На Этапе 2 (Проекты $C_j=0$) порядок проектов не важен, но **оптимально использовать наименьшего возможного Специалиста** для каждого проекта.

**Обоснование:**
Поскольку в этом Этапе ресурсы расходуются безвозвратно, использование наименьшего специалиста $A_i \geq B_j$ сохраняет более сильные ресурсы для потенциально более сложных оставшихся проектов.

##  Жадный Алгоритм

1.  **Этап 1 (Развитие):**
    * Используем **Min-Heap** (куча минимума) для поддержания всех доступных уровней экспертизы $A_i$.
    * Обрабатываем проекты $C_j > 0$ в **возрастающем порядке $B_j$**.
    * Для каждого проекта: Извлекаем из кучи самого слабого Специалиста; если $A_i < B_j$, сохраняем его для Этапа 2; если $A_i \geq B_j$, используем его, обновляем $A_i$ до $\max(A_i, C_j)$ и возвращаем в кучу.
2.  **Этап 2 (Утилизация):**
    * Собираем все оставшиеся ресурсы ($A_i$ из кучи + отложенные).
    * Сортируем собранные ресурсы и Проекты $C_j = 0$ (также по $B_j$).
    * Используем **метод двух указателей** для жадного сопоставления наименьшего возможного Специалиста с каждым Проектом.

Сложность алгоритма: $O(N \log N)$.

