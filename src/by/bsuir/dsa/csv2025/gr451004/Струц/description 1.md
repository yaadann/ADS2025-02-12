# Название

Список желаемых подарков

# Описание

Список желаемых подарков

Студенты университета очень любят дарить друг другу подарки. В этом году было решено составить списки желаемых подарков, которых есть M видов, ради эксперимента.
Есть N таких списков, однако каждого вида подарков есть только одна штука.

Какое максимальное количество студентов получит хотя бы один желаемый подарок в этом году?

## Пример данных и ответа
*Ввод (3 списка подарков, по 2 подарка в каждом; 5 видов подарков)*
5
3 2
4 5
3 2
5 3

*Вывод*
3

# Краткая теория

Теория: сведение задачи о паросочетании к максимальному потоку

Для решения задачи распределения подарков мы используем задачу *максимального паросочетания* в двудольном графе и решаем её через алгоритм поиска *максимального потока*.

## 1. Определения

Пусть дан двудольный граф $G = (U \cup V, E)$, где:
- $U = \{u_1, u_2, \dots, u_N\}$ — множество студентов (левая доля).
- $V = \{v_1, v_2, \dots, v_M\}$ — множество видов подарков (правая доля).
- $E$ — множество ребер. Ребро $(u_i, v_j) \in E$ существует, если студент $u_i$ хочет подарок $v_j$.

*Паросочетание* $M \subseteq E$ — это набор ребер, в котором никакие два ребра не имеют общей вершины.
*Цель:* Найти паросочетание $M$ максимального размера $|M|$.

## 2. Построение транспортной сети

Чтобы применить алгоритмы потоков, построим новую сеть $G' = (V', E')$:

1.  *Добавляем фиктивные вершины:*
  - Исток $S$.
  - Сток $T$.
  - Множество вершин: $V' = U \cup V \cup \{S, T\}$.

2.  *Строим ребра и задаем пропускные способности $c(x, y)$:*

  - *От истока к студентам ($S \to U$):*
     - Для каждого студента $u_i \in U$ проводим ребро $S \to u_i$.
     - $$c(S, u_i) = 1$$
     - _Физический смысл:_ В систему поступает 1 единица "потребности" для каждого студента (он может взять только 1 подарок).

  - *Предпочтения ($U \to V$):*
     - Для каждого ребра предпочтения $(u_i, v_j) \in E$ проводим ориентированное ребро $u_i \to v_j$.
     - $$c(u_i, v_j) = 1 \quad (\text{или } \infty)$$
     - _Физический смысл:_ Поток может пройти, если студент согласен на этот подарок.

  * *От подарков к стоку ($V \to T$):*
     - Для каждого подарка $v_j \in V$ проводим ребро $v_j \to T$.
     - $$c(v_j, T) = 1$$
     - _Физический смысл:_ Подарок данного вида имеется в одном экземпляре.

## 3. Основная теорема

Величина максимального потока $f_{max}$ в построенной сети $G'$ численно равна размеру максимального паросочетания в исходном графе $G$.

$$|M_{max}| = |f_{max}|$$

