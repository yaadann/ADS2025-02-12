# Название

Поиск остовного дерева и связности районов

# Описание

Поиск минимального остова и проверки связности

Город строит сеть скоростных дорог между районами.  
Каждая дорога описывается парой районов и её стоимостью строительства.  
Часть дорог уже построена, часть только планируется.

Нужно написать программу на Java, которая:

1. По заданному неориентированному взвешенному графу строит минимальное остовное дерево (MST), если оно существует.  
2. Отвечает на запросы о связности районов.

## Формат входных данных

Первая строка: список дорог в формате

`A-B(5), B-C(3), C-D(4), A-D(10)`

где `A` и `B` — имена районов (строки без пробелов), число в скобках — стоимость дороги (целое положительное).

Вторая строка: целое число `Q` — количество запросов.

Далее `Q` строк, каждый запрос одного из двух видов:

- `MST` — вывести суммарную стоимость минимального остова или строку `NO MST`, если нельзя связать все районы.  
- `CONNECTED X Y` — проверить, находятся ли районы `X` и `Y` в одной компоненте связности, вывести `YES` или `NO`.

## Формат выходных данных

Для каждого запроса вывести одну строку:

- для `MST`: число или `NO MST`;  
- для `CONNECTED`: `YES` или `NO`.

# Краткая теория

### Минимальное остовное дерево и связность

Минимальное остовное дерево (Minimum Spanning Tree, MST) неориентированного взвешенного графа — это такой подграф, который содержит все вершины, является деревом (граф связен и не содержит циклов) и имеет минимальную возможную сумму весов рёбер.  
Типичный пример применения — проектирование сети дорог или связи между городами с минимальной общей стоимостью строительства.

Алгоритм Краскала — классический жадный алгоритм поиска MST.  
Он сортирует все рёбра по неубыванию веса и проходит их в этом порядке, добавляя ребро, только если его концы лежат в разных компонентах связности; если они уже соединены путём из ранее выбранных рёбер, ребро пропускается, чтобы не создавать цикл.  

Для поддержки компонент связности используется структура «система непересекающихся множеств» (Disjoint Set Union, DSU) с операциями find и union.  
Сжатие путей и объединение по рангу или по размеру делают эти операции очень быстрыми, а общая асимптотика алгоритма Краскала определяется сортировкой рёбер и равна порядку m log m, где m — количество рёбер в графе.

