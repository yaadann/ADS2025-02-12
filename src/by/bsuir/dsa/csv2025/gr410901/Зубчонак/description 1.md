# Название

Максимальное количество готовых комплектов в пасьянсе «Паук» после одного хода

# Описание

Рассмотрим упрощённый пасьянс «Паук» с одной мастью (карты от 1 до 13). Игра начинается с 10 стопок: первые 4 содержат по 6 карт, остальные — по 5 карт (всего 54 карты).

**Правила хода**:
- Разрешено перенести любую **непрерывную убывающую последовательность** с верхушки одной стопки в другую, если верхняя карта целевой стопки на 1 больше последней карты последовательности.
- После хода автоматически удаляются все готовые комплекты `13,12,…,1`, **находящиеся в начале (сверху)** любой стопки.

**Задача**:  
Определите **максимальное количество готовых комплектов**, которое может оказаться в состоянии игры **после одного допустимого хода** (включая начальное состояние, если оно уже содержит комплекты).

## Ввод  
10 строк, описывающих стопки. Каждая строка:  
```
k c₁ c₂ … cₖ
```  
где `k` — количество карт в стопке (0 ≤ k ≤ 6), `cᵢ` — значение карты (1–13), порядок — **сверху вниз**.

## Вывод  
Одно целое число — максимальное количество комплектов `13,12,…,1` в начале стопок после одного хода.

## Пример 1  
Ввод:
```
13 13 12 11 10 9 8 7 6 5 4 3 2 1
0
0
0
0
0
0
0
0
0
```
Вывод:
```
1
```

## Пример 2  
Ввод:
```
13 13 12 11 10 9 8 7 6 5 4 3 2 1
13 13 12 11 10 9 8 7 6 5 4 3 2 1
0
0
0
0
0
0
0
0
```
Вывод:
```
2
```

# Краткая теория

Пасьянс «Паук» — **одноигроковая комбинаторная игра**, подпадающая под класс *impartial games* (игры с несмещёнными ходами). Состояние игры задаётся упорядоченным набором стопок карт.

Определим **инвариант состояния**:  
> Готовый комплект — убывающая последовательность `13,12,…,1`, расположенная **в начале стопки**.  

Формально, стопка $p = [p_0, p_1, \dots, p_{\ell-1}]$ содержит комплект, если  
$$
\forall i \in [0, 12] \colon p_i = 13 - i.
$$

Пусть $c(P)$ — число таких комплектов в состоянии $P$.  
Задача сводится к вычислению:
$$
\max_{P' \in \mathrm{Next}(P_0)} c(P'),
$$
где $\mathrm{Next}(P_0)$ — множество состояний, достижимых из начального $P_0$ за **один ход**.

Ход допустим, если существует:
- непустая стопка $i$ с убывающим префиксом длины $L$:  
  $$
  \forall j \in [0, L-2] \colon p^{(i)}_j = p^{(i)}_{j+1} + 1,
  $$
- стопка $j \ne i$, такая что $p^{(j)}_0 = p^{(i)}_{L-1} + 1$ или $p^{(j)} = \varnothing$.

Алгоритм перебирает все $O(n^2 \cdot m^2)$ ходов ($n = 10$, $m = 6$) и для каждого проверяет $c(P')$ за $O(n \cdot 13)$.

См.:  
- [Combinatorial Game Theory](https://ru.algorithmica.org/cs/games/)

