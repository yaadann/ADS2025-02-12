# Название

Покрытие отрезками

# Описание

Покрытие отрезками

## Условие задачи

На числовой прямой расположено n отрезков и дано m точек.
Для каждой точки требуется определить, сколькими отрезками она покрыта.

### Формат входных данных

Первая строка:

n (1 ≤ n ≤ 10⁵) — количество отрезков
m (1 ≤ m ≤ 10⁵) — количество точек

Далее n строк — описание отрезков:

l r — координаты концов отрезка (–10⁹ ≤ l, r ≤ 10⁹, l может быть > r)

Последняя строка — m целых чисел:

координаты точек (–10⁹ ≤ pi ≤ 10⁹)

### Формат выходных данных

Одна строка из m чисел — для каждой точки количество отрезков, её покрывающих.

### Пример

**Входные данные:**

2 3
0 5
7 10
1 6 11

**Выходные данные:**

1 0 0

### Ограничения

- Время: O(n log n + m log n)
- Память: O(n)
- Требуется реализовать свою сортировку (быструю, гибридную, с 3-сторонним разбиением и т.п.)
- Использование Arrays.sort()запрещено

# Краткая теория

---
title: Сортировки
weight: 5
authors:
  - Вероника Скачкова
created: 2025
---

В представленном коде реализована гибридная сортировка, сочетающая преимущества двух алгоритмов: QuickSort и Insertion Sort. Такой подход демонстрирует важную концепцию в алгоритмах — использование сильных сторон разных методов для достижения оптимальной производительности.

## QuickSort и трёхстороннее разбиение

Быстрая сортировка (QuickSort) работает по принципу "разделяй и властвуй", выбирая опорный элемент и разбивая массив на две части: элементы меньше опорного и элементы больше опорного. Этот процесс рекурсивно применяется к полученным подмассивам. Главное преимущество QuickSort заключается в его средней временной сложности O(n log n) и эффективности работы с большими массивами данных. Однако у алгоритма есть существенный недостаток — в худшем случае его сложность деградирует до O(n²), что происходит при неудачном выборе опорного элемента, особенно в уже отсортированных или почти отсортированных массивах.

Для смягчения этой проблемы в реализации используется метод "медианы трёх", который выбирает опорный элемент как медиану между первым, средним и последним элементами массива. Этот подход значительно снижает вероятность наихудшего сценария. Дополнительно применяется трёхстороннее разбиение (известное как алгоритм голландского флага), которое разделяет массив не на две, а на три части: элементы меньше опорного, равные опорному и больше опорного. Это особенно эффективно при наличии повторяющихся элементов в массиве.

## Сортировка вставками

Сортировка вставками (Insertion Sort), в отличие от QuickSort, работает по принципу постепенного построения отсортированной последовательности, вставляя каждый новый элемент в правильную позицию относительно уже отсортированной части. Хотя в общем случае этот алгоритм имеет квадратичную сложность O(n²), он исключительно эффективен для малых массивов и почти отсортированных данных. Его преимущества включают простоту реализации, устойчивость (сохранение относительного порядка равных элементов) и минимальные накладные расходы.

## Гибридная сортировка

Гибридный подход, представленный в коде, интеллектуально сочетает эти два алгоритма, используя сортировку вставками для малых подмассивов (когда размер становится меньше определённого порога, обычно 10-20 элементов) и быструю сортировку для больших частей массива. Такой выбор основан на эмпирических наблюдениях: для малых массивов накладные расходы рекурсии и сложной логики разделения превосходят выгоду от асимптотически лучших алгоритмов, тогда как простые алгоритмы вроде сортировки вставками оказываются более эффективными. Гибридные алгоритмы сортировки представляют собой прекрасный пример практической мудрости в проектировании алгоритмов: вместо поиска универсального решения, они используют ситуационные преимущества разных подходов.

