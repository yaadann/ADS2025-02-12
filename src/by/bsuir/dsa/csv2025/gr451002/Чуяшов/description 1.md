# Название

Ним в поддавки

# Описание

---
title: Ним в поддавки
weight: 3
authors:
  - Ты
created: 2025-11-24
---
# Ним в поддавки

Есть n кучек камней, в i-й кучке изначально aᵢ камней (0 ≤ aᵢ ≤ 10⁹).  
За один ход игрок выбирает одну кучку и убирает из неё любое положительное число камней.  
Проигрывает тот, кто заберёт последний камень (misère-версия).

Определите, кто победит при оптимальной игре.

Входные данные  
Первая строка — t (1 ≤ t ≤ 10⁵).  
Для каждого теста: n (1 ≤ n ≤ 2·10⁵) и n чисел a₁ … aₙ.  
Суммарное n по всем тестам ≤ 2·10⁵.

Выходные данные  
Для каждого теста выведите First или Second.

## Краткая теория

Пусть S = a₁ ⊕ a₂ ⊕ … ⊕ aₙ, mx = max(aᵢ).

Первый игрок выигрывает ⇔ выполнено хотя бы одно из условий:

1. S ≠ 0 и mx > 1  
2. mx ≤ 1 и количество кучек размера 1 нечётно

Эквивалентно: считаем как в обычном Ниме, но если все кучки ≤ 1 — меняем победителя на противоположного.

Примеры  
[3,1,1] → S=3≠0, mx=3>1 → First  
[1,1,1] → все ≤1, три единицы (нечётно) → Second  
[1,1] → две единицы (чётно) → First  
[1] → одна единица → Second

# Краткая теория

---
title: Ним в поддавки: поиск хода
weight: 4
authors:
  - Ты
created: 2025-11-24
---
# Ним в поддавки: поиск хода

Те же правила, что и в «Ним в поддавки»: misère-версия обычного Нима.

Если выигрышный ход существует, выведите номер кучки (1-indexed) и новое количество камней в ней (0 ≤ new < aᵢ).  
Если ходов несколько — выведите любой.  
Если позиция проигрышная — выведите -1.

Ограничения те же: t ≤ 10⁵, суммарное n ≤ 2·10⁵, 0 ≤ aᵢ ≤ 10⁹.

## Краткая теория

Если mx > 1 — играем как в обычном Ниме: ищем любую кучку i, где aᵢ ⊕ S < aᵢ, и ставим в неё aᵢ ⊕ S.  
Если все кучки ≤ 1 и позиция выигрышная (нечётное число единиц), берём одну единицу → оставляем чётное количество.

Исключение: если обычный ход из Нима переводит в позицию «все единицы и их нечётное число», то такой ход плохой — нужно вместо него убрать целую кучку размера 1.

