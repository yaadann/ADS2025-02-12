# Название

Эйлеров цикл в списке рёбер

# Описание

Эйлеров цикл в списке рёбер

## Задание

Дан связный неориентированный граф без петель, заданный последовательностью рёбер.  
Каждое ребро задаётся парой целых чисел `u-v`, где `u` и `v` — номера вершин (натуральные числа).  
Рёбра разделены пробелами.

Для данного графа:

1. Проверить, существует ли в графе эйлеров цикл.
2. Если эйлеров цикл существует, построить **один** эйлеров цикл с помощью алгоритма, основанного на рекурсивном удалении рёбер.
3. Если эйлеров цикл не существует, вывести сообщение об его отсутствии.

### Формат входных данных

- Во входной строке задана непустая последовательность рёбер вида  
  `u1-v1 u2-v2 ... uk-vk`  
  где `ui` и `vi` — целые положительные числа, `1 ≤ ui, vi ≤ 10^5`.  
- Гарантируется, что граф связен (если рассматривать только вершины, встречающиеся во входе).
- В графе **нет петель** (ребёр вида `x-x`), но могут быть кратные рёбра.

### Формат выходных данных

1. Если эйлеров цикл **существует**:
   - В первой строке вывести `YES`.
   - Во второй строке вывести последовательность вершин эйлерова цикла в порядке обхода, разделяя вершины пробелом.  
     Цикл должен начинаться и заканчиваться одной и той же вершиной.
2. Если эйлеров цикл **не существует**:
   - Вывести единственную строку `NO`.

> **Замечания:**
> - Степень вершины — количество инцидентных ей рёбер (каждое кратное ребро учитывается отдельно).
> - По теореме, эйлеров цикл существует тогда и только тогда, когда степени всех вершин чётны.
> - При построении цикла рекомендуется:
>   - хранить список смежности (например, в виде стека/списка индексов рёбер),
>   - помечать рёбра как «удалённые»,
>   - рекурсивно обходить граф.
> - Выводить вершины в том порядке, в котором они «добавляются» в итоговый цикл (обычно — в момент выхода из рекурсии).

---

## Пример 1

- Ввод:  
  `1-2 2-3 3-1`

- Ожидаемый вывод:  
  `YES 1 2 3 1`

(Допускаются циклы, начинающиеся с другой вершины, например: `2 3 1 2`.)

---

## Пример 2

- Ввод:  
  `1-2 2-3 3-4`

- Ожидаемый вывод:  
  `NO`

# Краткая теория

Теоретические сведения

## Эйлеров цикл в неориентированном графе

### Определения

**Граф** — это множество вершин и рёбер, каждое ребро соединяет пару вершин.

**Степень вершины** — количество рёбер, инцидентных данной вершине.  
Кратные рёбра учитываются по отдельности. В задаче петли (рёбра вида `v-v`) не допускаются.

**Эйлеров путь** — это путь, который проходит по каждому ребру графа **ровно один раз**.

**Эйлеров цикл** — это эйлеров путь, который начинается и заканчивается в одной и той же вершине.

В данной задаче рассматриваются **связные неориентированные графы без петель**, но с возможными кратными рёбрами.

### Условие существования эйлерова цикла

Теорема (для неориентированного графа):

> Эйлеров цикл существует тогда и только тогда, когда:
> 1. Граф связен (если взять только вершины, встречающиеся во входных данных),
> 2. Степени **всех** вершин чётны.

В нашей постановке связность заранее гарантируется, поэтому достаточно проверить **чётность степеней всех вершин**.

### Алгоритм построения (алгоритм Хиерхольцера)

Для построения эйлерова цикла часто используют рекурсивный алгоритм, основанный на последовательном «удалении» рёбер:

1. Выбрать любую вершину, из которой выходит хотя бы одно ребро (в задаче можно взять любую вершину, встречающуюся во входе).
2. Пока из текущей вершины `v` есть неиспользованные рёбра:
   - выбрать любое такое ребро `v–u`,
   - пометить его как использованное (или удалить из списков смежности),
   - рекурсивно перейти в вершину `u`.
3. Когда из вершины `v` больше нет неиспользованных рёбер, добавить `v` в результат (обычно — в конец списка).

Если все степени вершин чётны и обработаны все рёбра, полученная последовательность вершин (прочитанная в обратном порядке добавления) будет эйлеровым циклом и включит каждое ребро ровно один раз.

