# Название

Минимально стоимостный максимальный поток в транспортной сети

# Описание

## Текст задания

Дана транспортная сеть, представленная ориентированным графом с *n* вершинами и *m* рёбрами.  
Каждое ребро имеет пропускную способность и стоимость передачи единицы потока.  
Необходимо найти максимальный поток между вершинами *s* (исток) и *t* (сток) так, чтобы его общая стоимость была минимальной.

Формат ввода:
- Первая строка: n m s t
- Далее *m* строк: u v c a  
  (рёбра с пропускной способностью c и стоимостью a)

Формат вывода:  
Максимальный поток и минимальную стоимость этого потока.


# Краткая теория

## Теория

Задача минимальной стоимости максимального потока объединяет два вида оптимизации:  
1. Максимизация величины потока — отправить как можно больше единиц потока из *s* в *t*.  
2. Минимизация стоимости — среди всех максимальных потоков выбрать самый «дешёвый».

### Остаточный граф

Алгоритм работает на остаточном графе, который динамически меняется.  
Для каждого ребра (u → v) добавляются:
- прямое остаточное ребро с оставшейся пропускной способностью,
- обратное ребро (v → u) с отрицательной стоимостью, позволяющее «откатить» часть потока.

Такой механизм обеспечивает гибкость перераспределения потока и поиск более дешёвых альтернативных путей.

### Кратчайшие пути по стоимости

Фундаментальный шаг — поиск минимальной стоимости пути от *s* до *t*.  
Используются два подхода:

- Беллман—Форд — работает с отрицательными рёбрами, но медленный.  
- Дейкстра с потенциалами — ускоренная версия, которая использует модифицированные стоимости (потенциалы), гарантируя отсутствие отрицательных весов и повышая производительность.

Пусть найдён очередной путь минимальной стоимости — через него отправляется максимально возможный объём потока.  
Операция повторяется, пока к *t* существует путь с ненулевой пропускной способностью.

### Свойства результата

После завершения алгоритма:
- поток является максимальным — дальнейшая отправка невозможна,
- стоимость — минимальная среди всех возможных максимальных потоков,
- остаточный граф фиксирует оптимальную структуру потока.


